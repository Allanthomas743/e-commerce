<div *ngIf="!isLoading" class="products-wrapper">
    <form class="search-container">
        <input type="text" (input)="onSearchChange($event)" placeholder="Search..." /> 
        <div class="category-list">
            <button class="category-button" [class.selected]="selectedCategory === 'all'" (click)="selectCategory('all')">All</button>
            <button class="category-button" [class.selected]="selectedCategory === 'under100'" (click)="selectCategory('under100')">Under $100</button>
            <button class="category-button" [class.selected]="selectedCategory === 'under500'" (click)="selectCategory('under500')">Under $500</button>
            <button class="category-button" [class.selected]="selectedCategory === 'under1000'" (click)="selectCategory('under1000')">Under $1000</button>
            <button class="category-button" [class.selected]="selectedCategory === 'under5000'" (click)="selectCategory('under5000')">Under $5000</button>
            <button class="category-button" [class.selected]="selectedCategory === 'more5000'" (click)="selectCategory('more5000')">More than $5000</button>
          </div>          
    </form> 

    <div *ngIf="firebaseService.getArrayValues(array).length > 0 && searchError === ''" class="products">
        <div *ngFor="let product of firebaseService.getArrayValues(array)" class="product">
            <img src={{product.img}} alt="product img">
            <h2>{{product.name}}</h2>
            <div *ngIf="product.promotion" class="promotion">
                <p>
                    <span class="promo-price">${{ product.price }}</span> 
                    <span class="promotion-value">
                        {{ product.promotion }}% off
                    </span>
                </p>
            </div>
            <div *ngIf="product.promotion" class="price">${{ product.price - (product.price * (product.promotion / 100)) }}</div>
            <div *ngIf="!product.promotion" class="price">${{ product.price }}</div>
            <p class="description">
                {{ product.description }}
            </p>
            <p *ngIf="product.shipping === 0" class="shipping">
                Free shipping
            </p>
        </div>
    </div>

    <p *ngIf="searchError !== ''">{{searchError}}</p>
    <p class="no-published" *ngIf="firebaseService.getArrayValues(array).length === 0 && !searchError">No products have been published</p>
</div>

<app-spinner *ngIf="isLoading"></app-spinner>